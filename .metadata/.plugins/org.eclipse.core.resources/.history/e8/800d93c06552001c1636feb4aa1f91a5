<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8" session="false"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Headers 매핑</title>
</head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script type="text/javascript">
	$(document).ready(function() {
		$("#putBtn").on("click", function() {
			var boardNo = $("#boardNo");
			var title = $("#title");
			var content = $("#content");
			var writer = $("#writer");
			
			var boardNoVal = boardNo.val();
			var titleVal = title.val();
			var contentVal = content.val();
			var writerVal = writer.val();
			
			var boardObject = {
					boardNo : boardNoVal,
					title : titleVal,
					content : contentVal,
					writer : writerVal
			};
			
			$.ajax({
				type:"put",
				url:"/board/" + boardNoVal,
				data:JSON.stringify(boardObject),
				contentType:"application/json; charset=utf-8",
				success:function(result){
					console.log("result:" + result);
					if(result === "SUCCESS"){
						alert("SUCCESS");
					}
				}
			});
		});
		
		$("#putHeaderBtn").on("click", function() {
			var boardNo = $("#boardNo");
			var title = $("#title");
			var content = $("#content");
			var writer = $("#writer");
			
			var boardNoVal = boardNo.val();
			var titleVal = title.val();
			var contentVal = content.val();
			var writerVal = writer.val();
			
			var boardObject = {
					boardNo : boardNoVal,
					title : titleVal,
					content : contentVal,
					writer : writerVal
			};
			
			$.ajax({
				type:"put",
				url:"/board/" + boardNoVal,
				headers:{
					"X-HTTP-Method-Override":"PUT"
				},
				data:JSON.stringify(boardObject),
				contentType:"application/json; charset=utf-8",
				success:function(result){
					console.log("result:"+result);
					if(result === "SUCCESS"){
						alert("SUCCESS");
					}
				}
			});
		});
	});
</script>
<body>
	<h1>Ajax Home</h1>
	
	<form>
		boardNo : <input type="text" name="boardNo" id="boardNo" value=""><br>
		title : <input type="text" name="title" id="title" value=""><br>
		content : <input type="text" name="content" id="content" value=""><br>
		writer : <input type="text" name="writer" id="writer" value=""><br>
	</form>
	<div>
		<button id="putBtn">수정</button>
		<button id="putHeaderBtn">수정(put with header)</button>
	</div>
</body>
</html>